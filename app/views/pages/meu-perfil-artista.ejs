<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meu Perfil</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"/>
    <link rel="stylesheet" href="css/meuperfil.css" />
    <link rel="shortcut icon" href="imagens/favicon.ico" type="image/x-icon">
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">

  
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:ital,wght@0,100..700;1,100..700&family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet"> 
</head>
  <body>

<%


let msgErro = "";
let avisoErro = {
  nome_usu: "",
  nomeusu_usu: "",  
  fone_usu: "",
  email_usu: "",
  imagem: "",
  "imagem-capa_usu": ""
};

let errosArray = [];

if (listaErros) {
  if (Array.isArray(listaErros)) {
    errosArray = listaErros;
  } else if (Array.isArray(listaErros.errors)) {
    errosArray = listaErros.errors;
  }
}


errosArray.forEach((itemErro) => {
    if (itemErro.path === "nome_usu") {
      avisoErro.nome_usu = "erro";
      msgErro += `* ${itemErro.msg} <br>`;
    }
    if (itemErro.path === "nomeusu_usu") {
      avisoErro.nomeusu_usu = "erro";
      msgErro += `* ${itemErro.msg} <br>`;
    }
    if (itemErro.path === "celular_usu") {
      avisoErro.fone_usu = "erro";
      msgErro += `* ${itemErro.msg} <br>`;
    }
    if (itemErro.path === "email_usu") {
      avisoErro.email_usu = "erro";
      msgErro += `* ${itemErro.msg} <br>`;
    }
    if (itemErro.path === "imagem-perfil_usu") {
      avisoErro.imagem = "erro";
      msgErro += `* ${itemErro.msg} <br>`;
    }
    if (itemErro.path === "imagem-capa_usu") {
      avisoErro["imagem-capa_usu"] = "erro";
      msgErro += `* ${itemErro.msg} <br>`;
    }
  });


   
          let arquivo = { imagem: "imagens/foto-perfil.png" }; 
    
         if (autenticado.img_perfil_pasta) {
          arquivo.imagem = autenticado.img_perfil_pasta;
        } else if (autenticado.img_perfil_banco) {
          arquivo.imagem = autenticado.img_perfil_banco;
        }

        let arquivobanner = {imagem_banner: "imagens/bg.png" };

        if (autenticado.img_banner_pasta) {
          arquivobanner.imagem_banner = autenticado.img_banner_pasta;
        }
        if (autenticado.img_banner_banco) {
          arquivobanner.imagem_banner = autenticado.img_banner_banco;
        }


        

   %>

<% if (msgErro != "") { %>

                    <script>
                        let msgErro ="<%= msgErro %>"
                        notify("Erro no preenchimento",
                        "Verifique o(s) campo(s): <br>" + msgErro.replace(/&lt;/g,"<").replace(/&gt;/g,">"), 
                        "error", "center",5000)                        
                    </script>
                    <%

            }
        
        if (dadosNotificacao) { 
            %>
            <script>
                    notify("<%= dadosNotificacao.titulo%>","<%= dadosNotificacao.mensagem%>", "<%= dadosNotificacao.tipo%>", "center")
                    if("<%= dadosNotificacao.tipo %>" == "success"){
                        setTimeout(function(){
                            window.location="/"
                        }, 3000)
                    }                        
            </script>
        <% } %>


<script>
  window.onload = function() {
    console.log('Data received:', valores);
  };
</script>


    <%- include('../partials/menu-logado'); %>
  
   
    <section class="base_cabecalho">
      <section id="banner-perfil">
        <img src="/<%= arquivobanner.imagem_banner %>" id="banner-perfil">

      </section>
      <section class="coluna_contaneir">
        <section class="coluna-esquerda">

          <section class="img__container">

            <img src="/<%= arquivo.imagem %>" alt="Perfil" id="imgFoto">
           
          </section>


           
         
          <script src="js/meuperfil.js"></script>
        <section class="embaixo">
          <h2 id="dados-principais-perfil">
          <h3 id="nome-perfil"> <%= nome_usuario %></h3>
          <p>UX/UI Designer</p>
          <p>@<%= user_usuario %></p>

          <p><button id="editarperfilbotao" class="editar-botao">Editar Perfil </button></p>
         

          

        </section>

          <ul class="quan-p-t-c">
            <li><span>6</span>Projetos</li>
            <li><span>0</span>Trabalhos</li>
            <li><span>0</span>Portfólios</li>
          </ul>
          <section class="sobre">
            <section class="paragrafo-descricao">
              <p class="descricao-meu-perfil">
                <%= descricao_perfil %>
              </p>
            </section>
            <ul class="redes-sociais-icons">
              <li><i class="fab fa-linkedin"></i></li>
              <i class="fab fa-pinterest"></i>
              <i class="fab fa-facebook"></i>
              <i class="fab fa-whatsapp"></i>
            </ul>
          </section>
   
        </section> 
        <section class="coluna-direta">
          <section class="coluna-da-direita">
            <ul class="p-t-c">
              <li><a href="">Publicações</a></li>
              <li><a href="">Portfólios</a></li>
              
                </ul>

                 <a href="/nova-publicacao" class="btn-link">Nova Publicação</a>

          
          </section>

          

          <section class="publi">
            <img src="imagens/arte1.jpg" alt="Publicações" class="publicacao-perfil"/>
            <img src="imagens/arte2.jpg" alt="Publicações" class="publicacao-perfil"/>
            <img src="imagens/arte3.jpg" alt="Publicações" class="publicacao-perfil"/>
            <img src="imagens/arte4.jpg" alt="Publicações" class="publicacao-perfil"/>
            <img src="imagens/arte5.jpg" alt="Publicações" class="publicacao-perfil"/>
            <img src="imagens/arte6.jpg" alt="Publicações" class="publicacao-perfil"/>
          </section>
        </section>
      </section>
    </section>

    

    <h2 id="secao-avaliacoes-h2">
        Avaliações de seus clientes
    </h2>
    
    <section class="carousel-container">
     <!--   <button class="carousel-button prev">&#10094;</button>
        
         <section id="secao-avaliacoes" class="carousel-track">


            
          



            <section class="avaliacao">
                <section class="info-criador-ava">
                    <img src="imagens/fotoperfil1.jpeg" class="foto-de-perfil">
                    <a href="/perfil">
                        <p class="nome-criador-ava"> Mariana Sanchez</p>
                    </a>
                </section>
                <section class="estrelinhas-avaliacao">
                    <ion-icon name="star-outline" class="far estrela"></ion-icon>
                    <ion-icon name="star-outline" class="far estrela"></ion-icon>
                    <ion-icon name="star-outline" class="far estrela"></ion-icon>
                    <ion-icon name="star-outline" class="far estrela"></ion-icon>
                    <ion-icon name="star-outline" class="far estrela"></ion-icon> <br>
                </section>
                <section class="conteudo-avaliacao">
                    <p>Lorem ipsum dolor sit, amet consectetur adipis
                        is ea expedita modi atque magn
                        am tenetur obcaecati labore!</p>
                </section>
            </section>
           
        </section> 

        
        
        <button class="carousel-button next">&#10095;</button> -->

        <p class="aviso-avaliacoes">Você ainda não possui nenhuma avaliação.</p>
    </section>

    
<!-- Modal de Edição de Perfil -->
<section id="editarPerfilModal" class="modal">
  <section class="modal-content">
    <button class="close">&times;</button>

    <h1 class="h1-editar-perfil">Editar Perfil</h1>
    <form action=/meu-perfil-artista method="POST" class="editar-perfil" enctype="multipart/form-data">

      <!-- Nome completo -->
      <section class="label-input" id="section-nome">
        <label for="name">Nome:</label>
        <input type="text" id="name" name="nome_usu" placeholder="Seu Nome"
          class="input-alteracao <%= avisoErro.nome_usu %>" value="<%= valores.nome_usu %>">
      </section>

      <!-- Nome de usuário -->
      <section class="label-input" id="section-username">
        <label for="username">Nome de usuário:</label>
        <input type="text" id="username" name="nomeusu_usu" placeholder="ex: maria_silva"
          class="input-alteracao <%= avisoErro.nomeusu_usu %>" value="<%= valores.nomeusu_usu %>">
      </section>

      <!-- Celular -->
      <section class="label-input" id="section-celular">
        <label for="celular">Celular:</label>
        <input type="text" id="celular" name="celular_usu"
          class="input-alteracao <%= avisoErro.fone_usu %>" placeholder="(00) 00000-0000"
          value="<%= valores.celular_usu %>">
      </section>

      <!-- Email -->
      <section class="label-input" id="section-email">
        <label for="email">Email:</label>
        <input type="email" id="email" name="email_usu" placeholder="seuemail@exemplo.com"
          class="input-alteracao <%= avisoErro.email_usu %>" value="<%= valores.email_usu %>">
      </section>

      <!-- Foto de perfil -->
      <section class="img-holder" id="section-img">
        <label for="imagem-perfil_usu">Foto de perfil:</label>
        <section class="lugar-botar-img">
          <label class="picture" for="imagem-perfil_usu">
            <span class="picture__image"></span>
            <p>Carregar imagem</p>
          </label>
          <input type="file" class="<%= avisoErro.imagem %>" name="img_perfil" id="imagem-perfil_usu"
            onchange="loadImg(event)">
          <img class="img-perfil" id="img-preview" src="<%= arquivo.imagem %>">
        </section>
      </section>

      <!-- Imagem de capa -->
      <!-- <section class="img-holder" id="section-capa">
        <label for="imagem-capa_usu">Imagem de capa:</label>
        <section class="lugar-botar-img">
          <label class="picture-banner" for="imagem-capa_usu">
            <span class="picture__image"></span>
            <p>Carregar imagem</p>
          </label>
          <input type="file" class="<%= avisoErro.imagem %>" name="img_banner" id="imagem-banner_usu"
            onchange="loadImg(event)">
          <img class="img-capa" id="img-preview" src="<%= arquivo['imagem-capa'] %>">
        </section>
      </section> -->

      <!-- Descrição -->
      <section class="label-input" id="section-desc">
        <label for="desc-perfil">Descrição do perfil:</label>
      <textarea name="descricao_perfil" id="desc-perfil" class="<%= avisoErro.descricao_perfil %>">
<%=descricao_perfil %>
      </textarea>


      </section>


      <!-- Especialidade -->
      <!-- <section class="label-input" id="section-espec">
        <label for="especialidade">Área de atuação:</label>
        <input type="text" id="especialidade" name="especialidade" class="input-alteracao"
          value="<%= valores.especialidade || '' %>">
      </section> -->

      <!-- Redes sociais -->
      <!-- <section class="link-social" id="links-redes">
        <p>Links das redes sociais:</p>
        <label for="instagram">Instagram:</label>
        <input type="text" id="instagram" name="link-instagram" class="input-alteracao"
          value="<%= valores['link-instagram'] || '' %>"><br>
        <label for="twitter">Twitter:</label>
        <input type="text" id="twitter" name="link-twitter" class="input-alteracao"
          value="<%= valores['link-twitter'] || '' %>"><br>
        <label for="linkedin">LinkedIn:</label>
        <input type="text" id="linkedin" name="link-linkedin" class="input-alteracao"
          value="<%= valores['link-linkedin'] || '' %>"><br>
      </section> -->

      <!-- Botão de envio -->
      <input type="submit" class="salvar" value="Salvar Alterações">
    </form>
  </section>
</section>


<%- include('../partials/rodape'); %>
          
 
   <script src="js/editar-perfil.js"> </script>
 

  </body>

  </html>
        